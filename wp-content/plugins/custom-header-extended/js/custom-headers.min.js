jQuery(document).ready(function($){$('.che-wp-color-picker').wpColorPicker();$('label[for="che-header-text-color"]').hide();if('show'==$('#che-header-text-show').val()||'default-show'==$('#che-header-text-show').val()){$('.che-header-text-color-section').show()}else{$('.che-header-text-color-section').hide()}$('#che-header-text-show').change(function(){if('show'==$(this).val()||'default-show'==$(this).val()){$('.che-header-text-color-section').show()}else{$('.che-header-text-color-section').hide()}});if($('.che-header-image-url').attr('src')){$('.che-header-image-url').show()}else{$('.che-header-image-url').hide()}if($('input#che-header-image').val()){$('.che-add-media-text').hide();$('.che-remove-media, .che-header-image-url').show()}else{$('.che-add-media-text').show();$('.che-remove-media, .che-header-image-url').hide()}$('.che-remove-media').click(function(j){j.preventDefault();$('#che-header-image').val('');$('.che-add-media-text').show();$('.che-remove-media, .che-header-image-url, .che-errors').hide()});var che_custom_headers_frame;$('.che-add-media').click(function(j){j.preventDefault();if(che_custom_headers_frame){che_custom_headers_frame.open();return}che_custom_headers_frame=wp.media.frames.che_custom_headers_frame=wp.media({className:'media-frame',frame:'select',multiple:false,title:che_custom_headers.title,library:{type:'image'},button:{text:che_custom_headers.button}});che_custom_headers_frame.on('select',function(){var media_attachment=che_custom_headers_frame.state().get('selection').toJSON();if(media_attachment[0].sizes.che_header_image){var che_media_url=media_attachment[0].sizes.che_header_image.url;var che_media_width=media_attachment[0].sizes.che_header_image.width;var che_media_height=media_attachment[0].sizes.che_header_image.height}else{var che_media_url=media_attachment[0].sizes.full.url;var che_media_width=media_attachment[0].sizes.full.width;var che_media_height=media_attachment[0].sizes.full.height}var che_errors='';if(che_custom_headers.min_width>media_attachment[0].sizes.full.width&&che_custom_headers.min_height>che_media_height){che_errors=che_custom_headers.min_width_height_error}else if(che_custom_headers.max_width<che_media_width&&che_custom_headers.max_height<che_media_height){che_errors=che_custom_headers.max_width_height_error}else if(che_custom_headers.min_width>media_attachment[0].sizes.full.width){che_errors=che_custom_headers.min_width_error}else if(che_custom_headers.min_height>che_media_height){che_errors=che_custom_headers.min_height_error}else if(che_custom_headers.max_width<che_media_width){che_errors=che_custom_headers.max_width_error}else if(che_custom_headers.max_height<che_media_height){che_errors=che_custom_headers.max_height_error}if(che_errors){$('.che-errors p').text(che_errors);$('.che-errors').show()}else{$('.che-errors').hide()}$('#che-header-image').val(media_attachment[0].id);$('.che-header-image-url').attr('src',che_media_url);$('.che-add-media-text').hide();$('.che-header-image-url, .che-remove-media').show()});che_custom_headers_frame.open()})});